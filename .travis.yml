# This file was autogenerated and will overwrite each time you run travis_pypi_setup.py
after_success:
- coveralls
deploy:
  on:
    tags: true
    python: 3.7
    repo: RhodiumGroup/rhg_compute_tools
    condition: $TEST_ENV = conda

  distributions: sdist bdist_wheel
  password:
    secure: q+GB3j77w+79RYNWjFD7SAc3bQt+ViRXSVYkcESkfiyXTQij6t5SRkwmomK+qhig44w+7ukz5GELqCCgC0UtcRFDyFh2wppdIwokwiXUKoI/039cgkhnfXI/Jp2QLj5DQx3/5VvhGwTmYunMWN7Wws8slhKr4woLbyM8Bo5pOfHD1P5xM631Qyg9KAG6D4wMztnEKIkBRcGywC5asMs67qhqwgGA9pGuG3laRAcH+R5tpfD16udrjffJ7Pf33d7JFw/QpzPvRA/UKefpItPs7b5AB//KnahaLfRUHWAJ7HvP9i7LVB4WueX0I6EYhdXknEpuXg79DGP7f4zTUERRFIV1C2RMcCox+jYdq8h6ePuA2dMGNWWVKsarPIvm3M1PjcU9e/3xKc/Zs8gOE6966rhBWqGnrIuzQ3fDes3CR7kDsxyFYnXilenTfsdroHeNpHBFxvLBLdhcrT83FlNS/OusgfGO3p1EoDkRAHvS/OHF6iyp45fEJxq0EG3rQm9Knybpu1pAlzdJRBUonKIfKrKm3wiPQaQROdRAPtjP7nv9GGKt9pdWxPTs1Q2T5/bBP5IqX9UjaQFHxXUZ+7qE3F+AkzSl221f8U4dBDLxaTzt6fUBRWZzR0Hi/Ol0yFoUtJzdwV/OYm5MQfXGFomHUIcZwkE7uvYiAfOm0vUyuAY=
  provider: pypi
  user: delgadom
env:
  matrix:
  - TEST_ENV=conda
install:
- pip install --upgrade pip
- wget -q https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
- bash miniconda.sh -b -p $HOME/miniconda;
- export PATH="$HOME/miniconda/bin:$PATH";
- hash -r;
- conda config --set always_yes yes --set changeps1 no;
- conda update -q conda;
- conda info -a;

- conda create -n test_env python=$TRAVIS_PYTHON_VERSION --yes;
- source activate test_env;

- python -m pip install -r requirements.txt;
- python -m pip install -r requirements_dev.txt;
- conda install --yes -c conda-forge --file requirements_conda.txt;
- python setup.py install;
language: python
python:
- 3.7
- 3.8
jobs:
  allow_failures:
    - python: 3.8
script:
- pytest
- rm -f docs/rhg_compute_tools.*.rst
- sphinx-apidoc -o docs rhg_compute_tools
- sphinx-build -W -b html -d docs/_build/doctrees docs/. docs/_build/html
- python setup.py sdist bdist_wheel && twine check dist/rhg_compute_tools-*.tar.gz
- python setup.py clean
